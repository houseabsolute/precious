[package]
name = "precious"
version = "0.2.2"
authors = ["Dave Rolsky <autarch@urth.org>"]
description = "One code quality tool to rule them all"
repository = "https://github.com/houseabsolute/precious"
documentation = "https://github.com/houseabsolute/precious"
readme = "README.md"
license = "MIT OR Apache-2.0"
edition = "2018"

[[bin]]
name = "precious"
path = "precious/src/main.rs"
doc = false

[dependencies]
log = "0.4.14"
precious-core = { version = "0.2.2", path = "./precious-core" }

[package.metadata.release]
tag-name = "v{{version}}"

[workspace]
members = [
        "precious-command",
        "precious-core",
        "precious-integration",
        "precious-testhelper",
]

[workspace.metadata.release]
allow-branch = ["master"]
consolidate-commits = true
consolidate-pushes = true
shared-version = true
sign-commit = true
sign-tag = true

[[workspace.metadata.release.pre-release-replacements]]
file = "Changes.md"
search = "<!-- next-header -->"
replace = "<!-- next-header -->\n\n## {{Unreleased}} - {{ReleaseDate}}"
exactly = 1

[[workspace.metadata.release.pre-release-replacements]]
file = "Changes.md"
search = "{{Unreleased}}"
replace = "{{version}}"

[[workspace.metadata.release.pre-release-replacements]]
file = "Changes.md"
search = "{{ReleaseDate}}"
replace = "{{date}}"
